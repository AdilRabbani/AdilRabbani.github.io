<!doctype html>
<html lang="en">                
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../images/Logo.png">

    <title>Adil Rabbani</title>

    <!-- Bootstrap core CSS -->
    <link href="../css/bootstrap.min.css" rel="stylesheet">

    <link href="https://fonts.googleapis.com/css?family=Playfair+Display:900" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=PT+Serif" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="../jumbotron.css" rel="stylesheet">

    <script type="text/javascript" src="../main_js/p5.js"></script>

    <style>

    body{
            color: #263238;
            font-size: 20px;
            font-family: 'PT Serif', serif;
            background-color : white;

        }


.tooltip-inner {
    max-width: 200px;
    padding: 3px 8px;
    color: #212121;
    text-align: center;
    border-radius: .25rem;
    background-color: white;
    font-family: 'Zilla Slab', serif;
}

.tooltip.bs-tooltip-auto[x-placement^=bottom] .arrow::before, .tooltip.bs-tooltip-bottom .arrow::before {
    content: "";
    border-width: 0 5px 5px;
    border-bottom-color: white;
}



.card {
  background: #fff;
  border-radius: 2px;
  display: inline-block;
  position: relative;
}

.card-3 {
  box-shadow: 0 10px 20px rgba(255,255,255,0.19), 0 6px 6px rgba(255,255,255,0.23);
}


a:link {
    color: #4285F4;
}

/* visited link */
a:visited {
    color: #4285F4;
}

/* mouse over link */
a:hover {
    color: #4285F4;
}

/* selected link */
a:active {
    color: #4285F4;
}

canvas {
    display: inline;
}

    </style>
  </head>

  <body>            

    <main role="main">

      <div class="container">
        <!-- Example row of columns -->

        <div class="row" style="margin-top:5px;">
          
          <nav class="navbar navbar-expand-lg navbar-light" style="font-size:20px;">
           
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation" style="background-color:white;border:2px solid #263238;">
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
              <ul class="navbar-nav">
                <li class="nav-item active">
                  <a class="nav-link" href="../index.html" style="color:#263238;">Home <span class="sr-only">(current)</span></a>
                </li>

                
                <li class="nav-item active">
                  <a class="nav-link" href="https://adilrabbani.github.io/resume/AdilRabbani_Resume.pdf" style="color:#263238;">Resume <span class="sr-only">(current)</span></a>
                </li> 

                <li class="nav-item active">
                  <a class="nav-link" href="../Projects.html" style="color:#263238;">Projects <span class="sr-only">(current)</span></a>
                </li>

                <li class="nav-item active">
                  <a class="nav-link" href="../Experiments.html" style="color:#263238;">Experiments <span class="sr-only">(current)</span></a>
                </li>

                <li class="nav-item active">
                  <a class="nav-link" href="../Blog.html" style="color:#263238;">Blog <span class="sr-only">(current)</span></a>
                </li>
                
              </ul>
            </div>
          </nav>

        </div>

        <div class="row">
        
          <div class="col-md-4">
          </div>

          <div class="col-md-4">
            <hr style="border: 1px solid #263238;">
          </div>

          <div class="col-md-4">
          </div>

        </div>

         <div class="row">
        
          <div class="col-md-12">
            <center><h1 style="font-weight: 900;font-family: 'Playfair Display', serif;">GSOC 2018 - My Summer with Processing Foundation</h1></center>
          </div>

        </div>

        <div class="row">
        
          <div class="col-md-4">
          </div>

          <div class="col-md-4">
            <hr style="border: 1px solid #263238;">
          </div>

          <div class="col-md-4">
          </div>

        </div>

        <div class="row">

<div class="col-md-1"></div>

          <div class="col-md-10">
            
            <p>
              
              I spent this summer working on Processing Foundation's p5.js along side <a href="https://github.com/AidanNelson">Aidan Nelson</a>, with the help of our mentors, <a href="https://github.com/mlarghydracept">Stalgia Grigg</a> and <a href="https://github.com/kjhollen">Kate Hollenbach</a>. My tasks for the summer included implementing missing 2D primitives in WebGL mode of p5.js : arc, point, bezierVertex, curveVertex, quadraticVertex and text. </p>

              <p>
              	
              	My first contribution to p5.js was when I was writing my GSOC proposal. This was just a minor change in <a href="https://github.com/processing/p5.js/pull/2737">reference examples</a> for curves and some examples for <a href="https://github.com/processing/p5.js/pull/2798">vertex()</a>. These small changes helped me in understanding the use of grunt, lint, and other node modules being used in the build process. I was really happy (and surprised) when my proposal got accepted ðŸ˜„. I was about to contribute to one of my favourite libraries. We had a shared <a href="https://github.com/processing/p5.js/tree/webgl-gsoc-2018">branch</a> on git where we would compare our pull requests to be merged.

              </p>

              <p>
              I have already been using p5.js for some simple sketches and animations, watching Daniel Shiffman's videos but I haven't really dived into the codebase. I started my summer by going through <a href="https://github.com/processing/p5.js/tree/master/test/manual-test-examples/webgl">manual examples</a>, debugging them in Chrome and watching the code jump from function to function. I have to admit though, it was a little daunting at first. My first task was to implement arc for WebGL mode and so I decided to go through already implemented ellipse and debugging it in the chrome editor. </p>

              <p>
              The code started to make sense and I started to make small changes so as to move forward in implementing arc. Before my first evaluation, I was able to complete my implementation of arc <a href="https://github.com/processing/p5.js/pull/2942">#2942</a>, with all three modes (OPEN, PIE, CHORD) and add documentation and <a href="https://github.com/processing/p5.js/tree/webgl-gsoc-2018/test/manual-test-examples/webgl/arc">test examples</a>. Ellipse was now refactored by using the same arc implementation. This closed issue <a href="https://github.com/processing/p5.js/issues/2181">#2181</a>.</p>

            </div>

            <div class="col-md-1"></div>

          </div>

          <br>

          <div class="row">
          
          <div class="col-md-2"></div>
          <div class="col-md-8">
            
            <center>
            <div id="sketch-2" style="width:80%; height:auto;-webkit-box-shadow: 0px 2px 17px 7px rgba(144,164,174,0.2);box-shadow: 0px 2px 17px 7px rgba(144,164,174,0.2);"></div><br><i>Pizza in p5.js!</i></center>

          </div>
          <div class="col-md-2"></div>

          </div>

          <br>

          <div class="row">

            <div class="col-md-1"></div>

            <div class="col-md-10">
              <p>
              WebGL by default renders square points. Looking through some resources on web gave me an idea of discarding pixels from a square point further to render a circular point. Adding the shader in p5.js was relatively simple. But upon adding the shader I came across a devilish bug that didn't go off no matter what. I spent a week and a half just going through every portion of the code, looking for where I went wrong but I was literally stuck. I decided to contact Stalgia and he looked through the code and suggested me to have a look in my shader code. There was one thing in my shader that was different from all the other shaders in p5.js. It was using attribute variable for pointSize while p5.js used uniform. I changed the variable to uniform and that was it! Everything was working perfectly.</p>

              <p>One small problem was still there though. A good approach on rendering points would be to use the default square point when the size of the point was really small and when it became big enough, it should render good looking circular points. I posted this <a href="https://github.com/processing/p5.js/issues/3017">issue</a> on Github and a contributor who have been working on this before, suggested to use his shader which worked the same way as mentioned. Finally, I opened a <a href="https://github.com/processing/p5.js/pull/3031">pull request</a> for point with two test examples for the primitive. This closed issues <a href="https://github.com/processing/p5.js/issues/2662">#2662</a> and <a href="https://github.com/processing/p5.js/issues/2184">#2184</a>.</p>
            </div>

            <div class="col-md-1"></div>
          
        </div>

        <br>

        <div class="row">
          
          <div class="col-md-2"></div>
          <div class="col-md-8">
            
            <center>
            <div id="sketch-1" style="width:80%; height:auto;-webkit-box-shadow: 0px 2px 17px 7px rgba(144,164,174,0.2);box-shadow: 0px 2px 17px 7px rgba(144,164,174,0.2);"></div><br><i>Sphere in p5.js using Spherical Coordinates.</i></center>

          </div>
          <div class="col-md-2"></div>

        </div>

        <br>

        <div class="row">
          
          <div class="col-md-1"></div>

          <div class="col-md-10">
            
            <p>
              
              I decided to go for curves next. I went through a great article on <a href="https://pomax.github.io/bezierinfo/en-GB/">bezier curves</a> for this task. Reading the article I came to know that a bezier curve can be easily converted to Catmull Rom Splines so this meant that if I was able to implement bezierVertex, implementing curveVertex was relatively simple (just converting the points). While quadraticVertex can be implemented by changing the formula used to compute coefficients for curves. </p>

              <p>
              I finally added the requried functions and started testing curves. Everything worked quite well, except just one. Filling curves gave weird results. At first, I thought maybe there was something wrong going on in my code but a further debugging revealed that we can't just fill curves with all the intersections and loops without a proper triangulation algorithm. After approval from Kate and Stalgia, I started testing different triangulation libraries (<a href="https://github.com/mapbox/earcut">Earcut</a>, <a href="https://github.com/brendankenny/libtess.js/">Libtess</a>, <a href="https://github.com/diatomic/tess2">Tess2</a>). Earcut was the most precise but wasn't giving correct results. At first we thought to tweak the library but then I decided to contact Earcut's creator first. I sent him an email and he responded claiming that Earcut won't be a good option for us.</p> 

              <p>Libtess seemed to work really well and this was also because it was based on the same <a href="https://github.com/processing/processing-android/tree/master/core/src/processing/opengl/tess">GLU Tesselator implementation</a> that was being used in Processing. The only problem with Libtess was that it was quite bigger than Earcut. We contacted <a href="https://github.com/lmccart">Lauren</a> if it was okay with integrating this library for the triangulation part. She encouraged us by saying that we can add the library as a node module just as opentype was being used for 2D text in p5.js. After integrating libtess, I decided to improve the code further for some performance gains. I was able to implement a look up table with the help of which, we wouldn't need to compute coefficients after rendering curve, the first time. This was a huge performance boost from the previous trivial implementation. All that was left was to submit a <a href="https://github.com/processing/p5.js/pull/3085">pull request</a> with an example showcasing what you can do with WebGL curves in p5.js. This closed issues <a href="https://github.com/processing/p5.js/issues/2185">#2185</a>, <a href="https://github.com/processing/p5.js/issues/2186">#2186</a> and <a href="https://github.com/processing/p5.js/issues/2187">#2187</a>.
            </p>

          </div>

          <div class="col-md-1"></div>

        </div>

        <br>

        <div class="row">
          
          <div class="col-md-2"></div>
          <div class="col-md-8">
            
            <center>
            <div id="sketch-3" style="width:80%; height:auto;-webkit-box-shadow: 0px 2px 17px 7px rgba(144,164,174,0.2);box-shadow: 0px 2px 17px 7px rgba(144,164,174,0.2);"></div><br><i>You can draw a flower out of curves in p5.js!</i></center>

          </div>
          <div class="col-md-2"></div>

        </div>

        <br>

        <div class="row">
          
          <div class="col-md-1"></div>
          <div class="col-md-10">
            
            <p>
            While working on curves I was also able to <a href="https://github.com/processing/p5.js/pull/3075">fix</a> a minor <a href="https://github.com/processing/p5.js/issues/3065">issue</a> with triangle stroke in 2D in p5.js. I also ported some examples from Processing to p5.js <a href="https://github.com/processing/p5.js-website/pull/242">#242</a>. Now I had one big task left : Implementing text for p5.js WebGL mode. Let me just mention one thing though, "One does not simply implement text in WebGL ðŸ˜¥" </p>
            
            <p>I went through different methods for rendering text in WebGL. At the end I was able to pick 2 methods that seemed perfect for rendering text. The first one was <a href="http://hack.chrons.me/opengl-text-rendering/">Signed Distance Field Rendering.</a> This was to use a 2D texture as text. But this wasn't a simple texture that would contain information about the glyph pixel, but it would rather contain the information about the distance to the border of the glyph. This gives us the ability to render nice text in different sizes. But there were still some problems. Read discussion <a href="https://github.com/processing/p5.js/issues/2183">here</a>.</p>

            <p>At the end we decided to go for a <a href="http://wdobbie.com/post/gpu-text-rendering-with-vector-textures/">GPU based rendering</a> approach. A relatively new technique for rendering text. The overhead of rendering text goes on to the GPU instead of the CPU and we get sharp crisp text at any size. I wasn't able to implement text as a <a href="https://github.com/Spongman">major contributor</a> had already done most of the work for text using the same technique. We decided that we <a href="https://github.com/processing/p5.js/pull/3110">pull</a> that implementation and polish it further (looking for bugs, improvements) instead of writing everything from scratch.</p>

            <p>A full list of my contributions on the webgl-gsoc-2018 branch can be seen <a href="https://github.com/processing/p5.js/commits/webgl-gsoc-2018?author=adilrabbani">here</a>.</p>

            <p>That wraps up my summer with Processing Foundation. I must say that I learned a lot this summer. Working with a great community at Processing was a memorable experience. I would still be contributing to the library in my spare time. ðŸ˜ƒ</p>

          </div>
          <div class="col-md-1"></div>

        </div>


      </div> <!-- /container -->
      

    </main>

    <footer class="footer">
      <div class="container">
          <hr style="border:3px solid #01579B;">
          <hr style="border:2px solid #6200EA;margin-top:-12px;">
          <p style="font-size:15px;">Copyright Â© Adil Rabbani. All Rights Reserved.</p>
      </div>
    </footer>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script>window.jQuery || document.write('<script src="../../../../assets/js/vendor/jquery-slim.min.js"><\/script>')</script>
    <script src="../vendor/popper.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>

    <script>
      
      $(document).ready(function(){
          $('[data-toggle="tooltip"]').tooltip(); 
      });

    </script>

    <script type="text/javascript" src="sketch_1.js"></script>
    <script type="text/javascript" src="sketch_2.js"></script>

  </body>
</html>
